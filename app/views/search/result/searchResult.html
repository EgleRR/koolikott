<div class="main">
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <div class="row row-material">
                    <div class="heading">
                        <h1 data-ng-if="!searching && searchQuery">
                            <span data-ng-if="getNumberOfResults() < 1">
                                <span data-translate="SEARCH_RESULT_NO_RESULT"></span>
                                <strong><span data-ng-bind="searchQuery"></span></strong>.
                            </span>
                            <span data-ng-if="getNumberOfResults() === 1">
                                <span data-translate="SEARCH_RESULT_1_RESULT_PART_1"></span>
                                <strong><span data-ng-bind="searchQuery"></span></strong>
                                <span data-translate="SEARCH_RESULT_1_RESULT_PART_2"></span>
                                <strong><span data-ng-bind="getNumberOfResults()"></span></strong><span data-translate="SEARCH_RESULT_1_RESULT_PART_3"></span>
                            </span>
                            <span data-ng-if="getNumberOfResults() > 1">
                                <span data-translate="SEARCH_RESULT_PART_1"></span>
                                <strong><span data-ng-bind="searchQuery"></span></strong>
                                <span data-translate="SEARCH_RESULT_PART_2"></span>
                                <strong><span data-ng-bind="getNumberOfResults()"></span></strong>
                                <span data-translate="SEARCH_RESULT_PART_3"></span>
                            </span>
                        </h1>
                        <h1 data-ng-if="!searching && !searchQuery">
                            <span data-ng-if="getNumberOfResults() < 1">
                                <span data-translate="SEARCH_RESULT_EMPTY_QUERY_NO_RESULT"></span>
                            </span>
                            <span data-ng-if="getNumberOfResults() === 1">
                                <span data-translate="SEARCH_RESULT_EMPTY_QUERY_1_RESULT_PART_1"></span>
                                <strong><span data-ng-bind="getNumberOfResults()"></span></strong>
                                <span data-translate="SEARCH_RESULT_EMPTY_QUERY_1_RESULT_PART_2"></span>
                            </span>
                            <span data-ng-if="getNumberOfResults() > 1">
                                <span data-translate="SEARCH_RESULT_EMPTY_QUERY_PART_1"></span>
                                <strong><span data-ng-bind="getNumberOfResults()"></span></strong><span data-translate="SEARCH_RESULT_EMPTY_QUERY_PART_2"></span>
                            </span>
                        </h1>
                    </div>

                    <div data-ng-repeat="item in items" class="col-md-3 col-sm-4 col-xs-12 col-ms-6">
                        <div data-ng-if="item.type === '.Material'" data-dop-material-box material="item"></div>
                        <div data-ng-if="item.type === '.Portfolio'" data-dop-portfolio-box portfolio="item"></div>
                    </div>
                </div>

                <div class="row row-material" data-ng-if="totalResults">
                    <div class="clearfix text-center">
                        <nav>
                            <ul class="pagination">
                                <li data-ng-if="paging.before.length === 0" class="disabled">
                                    <span aria-label="{{'SEARCH_RESULT_PREVIOUS' | translate}}" class="btn btn-default">
                                        <span aria-hidden="true"><span data-translate="SEARCH_RESULT_PREVIOUS"></span></span>
                                    </span>
                                </li>
                                <li data-ng-if="paging.before.length > 0">
                                    <a href="{{buildURL(searchQuery, paging.thisPage - 1, filters.subject.name, filters.resourceType.name, filters.educationalContext.name, filters.licenseType.name)}}" aria-label="{{'SEARCH_RESULT_PREVIOUS' | translate}}" class="btn btn-default">
                                        <span aria-hidden="true"><span data-translate="SEARCH_RESULT_PREVIOUS"></span></span>
                                    </a>
                                </li>

                                <li data-ng-repeat="page in paging.before">
                                    <a href="{{buildURL(searchQuery, page, filters.subject.name, filters.resourceType.name, filters.educationalContext.name, filters.licenseType.name)}}" data-ng-bind="page"></a>
                                </li>

                                <li class="active"><span data-ng-bind="paging.thisPage"></span></li>

                                <li data-ng-repeat="page in paging.after">
                                    <a href="{{buildURL(searchQuery, page, filters.subject.name, filters.resourceType.name, filters.educationalContext.name, filters.licenseType.name)}}" data-ng-bind="page"></a>
                                </li>

                                <li data-ng-if="paging.after.length === 0" class="disabled">
                                    <span aria-label="{{'SEARCH_RESULT_NEXT' | translate}}" class="btn btn-default">
                                        <span aria-hidden="true"><span data-translate="SEARCH_RESULT_NEXT"></span></span>
                                    </span>
                                </li>
                                <li data-ng-if="paging.after.length > 0">
                                    <a href="{{buildURL(searchQuery, paging.thisPage + 1, filters.subject.name, filters.resourceType.name, filters.educationalContext.name, filters.licenseType.name)}}" aria-label="{{'SEARCH_RESULT_NEXT' | translate}}" class="btn btn-default">
                                        <span aria-hidden="true"><span data-translate="SEARCH_RESULT_NEXT"></span></span>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="sidebar-module sidebar-module-filter">
                    <h4 data-translate="SEARCH_FILTER_TITLE"></h4>
                    
                    <div class="form-group">
                        <label for="filter-subject" data-translate="SEARCH_FILTER_SUBJECT_LABEL"></label>
                        <ui-select data-ng-model="filters.subject" theme="bootstrap" data-ng-disabled="disabled" id="filter-subject">
                            <ui-select-match allow-clear="true" placeholder="{{'SEARCH_FILTER_SUBJECT_PLACEHOLDER' | translate}}">
                                <span data-ng-if="$select.selected.name" data-translate="{{'SUBJECT_' + $select.selected.name.toUpperCase()}}"></span>
                            </ui-select-match>
                            <ui-select-choices repeat="subject in subjects | subjectFilter: $select.search">
                                <span ng-bind-html="'SUBJECT_' + subject.name.toUpperCase() | translate | highlight: $select.search"></span>                           
                            </ui-select-choices>
                        </ui-select>
                    </div>
                    
                    <div class="form-group">
                        <label for="filter-resource-type" data-translate="SEARCH_FILTER_RESOURCE_TYPE_LABEL"></label>
                        <ui-select data-ng-model="filters.resourceType" theme="bootstrap" data-ng-disabled="disabled" id="filter-resource-type">
                            <ui-select-match allow-clear="true" placeholder="{{'SEARCH_FILTER_RESOURCE_TYPE_PLACEHOLDER' | translate}}">
                                <span data-ng-if="$select.selected.name" data-translate="{{$select.selected.name.toUpperCase()}}"></span>
                            </ui-select-match>
                            <ui-select-choices repeat="type in resourceTypes | resourceTypeFilter: $select.search">
                                <span ng-bind-html="type.name.toUpperCase() | translate | highlight: $select.search"></span>                           
                            </ui-select-choices>
                        </ui-select>
                    </div>

                    <div class="form-group">
                        <label for="filter-educational-context" data-translate="SEARCH_FILTER_EDUCATIONAL_CONTEXT_LABEL"></label>
                        <ui-select data-ng-model="filters.educationalContext" theme="bootstrap" data-ng-disabled="disabled" id="filter-educational-context">
                            <ui-select-match allow-clear="true" placeholder="{{'SEARCH_FILTER_EDUCATIONAL_CONTEXT_PLACEHOLDER' | translate}}">
                                <span data-ng-if="$select.selected.name" data-translate="{{$select.selected.name.toUpperCase()}}"></span>
                            </ui-select-match>
                            <ui-select-choices repeat="context in educationalContexts | educationalContextFilter: $select.search | orderBy: 'id'">
                                <span ng-bind-html="context.name.toUpperCase() | translate | highlight: $select.search"></span>                           
                            </ui-select-choices>
                        </ui-select>
                    </div>
                    
                    <div class="form-group">
                        <label for="filter-license-type" data-translate="SEARCH_FILTER_LICENSE_TYPE_LABEL"></label>
                        <ui-select data-ng-model="filters.licenseType" theme="bootstrap" data-ng-disabled="disabled" id="filter-license-type">
                            <ui-select-match allow-clear="true" placeholder="{{'SEARCH_FILTER_LICENSE_TYPE_PLACEHOLDER' | translate}}">
                                <span data-ng-if="$select.selected.name" data-translate="{{'LICENSETYPE_' + $select.selected.name.toUpperCase()}}"></span>
                            </ui-select-match>
                            <ui-select-choices repeat="type in licenseTypes | licenseTypeFilter: $select.search">
                                <span ng-bind-html="'LICENSETYPE_' + type.name.toUpperCase() | translate | highlight: $select.search"></span>                           
                            </ui-select-choices>
                        </ui-select>
                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn btn-default pull-right" data-ng-click="filter()"><span data-translate="SEARCH_FILTER_BUTTON_FILTER"></span></button>
                        <button type="submit" class="btn btn-primary pull-right" data-ng-click="reset()"><span data-translate="SEARCH_FILTER_BUTTON_RESET"></span></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
