<div id="page-view-portfolio" layout="row" flex>
  <!-- md-sidenav -->
  <md-sidenav layout="column" class="md-sidenav-left md-whiteframe-z2" md-component-id="left" md-is-locked-open="$mdMedia('gt-md')">
    <md-toolbar class="md-primary">
      <h6 class="md-toolbar-tools md-subhead">
		<span>
			<md-button class="md-icon-button hide-gt-md" data-ng-click="toggleSidenav('left')" >
			  <md-icon class="md-48">arrow_backward</md-icon>
			</md-button>
		</span>
        <span data-translate="TABLE_OF_CONTENTS"></span>
      </h6>
    </md-toolbar>

    <md-content layout="column" flex role="navigation" class="sidenav">
      <div data-dop-table-of-contents data-portfolio="portfolio" data-readonly="true"></div>
    </md-content>
  </md-sidenav>
  <!-- /md-sidenav -->

  <!-- main content -->
  <div layout="column" flex>
    <section id="main-content" layout="row" layout-sm="column" layout-align="start start">
      <article class="md-padding" layout="column" flex="75" flex-sm="100" role="main">
        <div data-dop-portfolio-summary-card></div>

        <!-- comments/commeting -->
        <md-card id="portfolio-comments">
          <md-card-content>
            <h2 class="portfolio-comments-title">
				<span data-translate="COMMENTS_TITLE"></span>
				<span>({{portfolio.comments.length}})</span>
				<span>
				  <md-icon class="md-primary" data-ng-class="{'toggled': showComments}" data-ng-click="showComments = !showComments">
					keyboard_arrow_down
				  </md-icon>
				</span>
            </h2>

            <div data-ng-show="showComments">
              <md-list>
                <md-list-item class="md-3-line" ng-repeat="comment in portfolio.comments">
                  <md-icon class="md-avatar-icon">person</md-icon>
                  <div class="md-list-item-text" layout="column">
                    <h3>{{comment.creator.name}} {{comment.creator.surname}}</h3>
                    <h4>{{comment.added.millis | date:'dd.MM.yyyy HH:mm'}}</h4>
                    <p>{{comment.text}}</p>
                  </div>
                </md-list-item>
              </md-list>

			  <div data-ng-if="authorized">
				  <h2 data-translate="ADD_COMMENT_TITLE"></h2>
				  <md-input-container flex>
					<label data-translate="COMMENT"></label>
					<textarea ng-model="newComment.text" rows="4"></textarea>
				  </md-input-container>
				  <div layout="row" layout-align="end center">
					<md-button data-translate="ADD_COMMENT_BUTTON" ng-click="addComment()" class="md-raised md-primary">
					</md-button>
				  </div>
			  </div>
			  
            </div>

          </md-card-content>
        </md-card>
        <!-- /commments/commenting -->

        <div id="portfolio-chapters">
          <div data-ng-repeat="chapter in portfolio.chapters">
            <div data-dop-chapter data-chapter="chapter" data-index="{{$index}}"></div>
          </div>
        </div>
      </article>

      <aside data-dop-sidebar flex="25" flex-sm="100" class="md-padding" role="sidebar"></aside>
    </section>
  </div>
</div>
