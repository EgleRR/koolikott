<md-sidenav md-is-open="sideNavOpen" class="md-sidenav-left"  md-component-id="left" id="sidebar-left">

  <!-- Portfolio Header and Chapters -->
  <md-toolbar class="md-hue-1">
    <div layout="row" layout-align="start center" data-ng-click="toggleSidenav('left')">
      <a data-ng-href="/" class="logo logo-bw" id="logo-sidenav"></a>
      <md-tooltip><span data-translate="HEADER_TOOLTIP_GO_TO_LANDING_PAGE"></span></md-tooltip>
      <span flex></span>
      <md-icon class="material-icons arrow pointer">keyboard_arrow_left</md-icon>
    </div>
  </md-toolbar>
  <md-divider></md-divider>
  <div id="alert" data-dop-alert></div>


  <uib-accordion close-others="oneAtATime" class="menu-nested-list">
    <div uib-accordion-group class="panel-default" ng-if="isViewPortforlioPage || isEditPortfolioMode" is-open="isViewPortfolioAndEdit">
      <div data-dop-table-of-contents data-portfolio="portfolio" data-readonly="!isEditPortfolioMode"></div>
    </div>
    <div uib-accordion-group class="panel-default" is-open="isViewUserPage">
      <uib-accordion-heading>
        <md-button class="md-hue-1 md-primary-menu">
          <div flex layout="row">
            <span class="panel-title__text" data-translate="MY_PROFILE"></span>
            <span flex></span>
            <md-icon class="md-primary material-icons arrow panel-title__arrow">keyboard_arrow_right</md-icon>
          </div>
        </md-button>
      </uib-accordion-heading>
      <!-- Subitems -->
      <ul>
        <li>
          <a data-ng-click="checkUser($event, '/')">
            <md-button class="md-hue-1 md-secondary-menu" data-ng-class="{'selected': isLocation('/' + user.username) && user != null}">
              <div flex layout="row">
                <md-icon class="material-icons">book</md-icon>
                <span data-translate="MY_PORTFOLIOS"></span>
                <span class="count">{{portfolios.length}}</span>
              </div>
            </md-button>
          </a>
        </li>
        <li>
          <a data-ng-click="checkUser($event, '/materials')">
            <md-button class="md-hue-1 md-secondary-menu" data-ng-class="{'selected': isLocation('/' + user.username + '/materials')}">
              <div flex layout="row">
                <md-icon class="material-icons">description</md-icon>
                <span data-translate="MY_MATERIALS"></span>
                <span class="count">{{materials.length}}</span>
              </div>
            </md-button>
          </a>
        </li>
        <li>
          <a data-ng-click="checkUser($event, '/favorites')">
            <md-button class="md-hue-1 md-secondary-menu" data-ng-class="{'selected': isLocation('/' + user.username + '/favorites')}">
              <div flex layout="row">
                <md-icon class="material-icons">star</md-icon>
                <span data-translate="MY_FAVORITES"></span>
                <span class="count">{{favorites.length}}</span>
              </div>
            </md-button>
          </a>
        </li>
      </ul>
    </div>
    <div uib-accordion-group class="panel-default" ng-if="modUser()" is-open="isViewAdminPanelPage">
      <uib-accordion-heading>
        <md-button class="md-hue-1 md-primary-menu" >
          <div flex layout="row">
            <span class="panel-title__text" data-translate="DASHBOARD"></span>
            <span flex></span>
            <md-icon class="md-primary material-icons arrow panel-title__arrow">keyboard_arrow_right</md-icon>
          </div>
        </md-button>
      </uib-accordion-heading>
      <!-- Subitems -->
      <ul>
        <li>
          <a href="/dashboard/improperMaterials">
            <md-button class="md-hue-1 md-secondary-menu" data-ng-class="{'selected': isLocation('/dashboard/improperMaterials')}">
              <div flex layout="row">
                <md-icon class="material-icons">report</md-icon>
                <span data-translate="IMPROPER_MATERIALS"</span>
                <span class="count">{{improperMaterialsCount}}</span>
              </div>
            </md-button>
          </a>
        </li>
        <li>
          <a href="/dashboard/improperPortfolios">
            <md-button class="md-hue-1 md-secondary-menu" data-ng-class="{'selected': isLocation('/dashboard/improperPortfolios')}">
              <div flex layout="row">
                <md-icon class="material-icons">report</md-icon>
                <span data-translate="IMPROPER_PORTFOLIOS"></span>
                <span class="count">{{improperPortfoliosCount}}</span>
              </div>
            </md-button>
          </a>
        </li>
        <li>
          <a href="/dashboard/brokenMaterials">
            <md-button class="md-hue-1 md-secondary-menu" data-ng-class="{'selected': isLocation('/dashboard/brokenMaterials')}">
              <div flex layout="row">
                <md-icon class="material-icons">content_cut</md-icon>
                <span data-translate="BROKEN_MATERIALS"></span>
                <span class="count">{{brokenMaterialsCount}}</span>
              </div>
            </md-button>
          </a>
        </li>
        <li>
          <a href="/dashboard/deletedMaterials">
            <md-button class="md-hue-1 md-secondary-menu" data-ng-class="{'selected': isLocation('/dashboard/deletedMaterials')}">
              <div flex layout="row">
                <md-icon class="material-icons">delete</md-icon>
                <span data-translate="DELETED_MATERIALS"></span>
                <span class="count">{{deletedMaterialsCount}}</span>
              </div>
            </md-button>
          </a>
        </li>
        <li>
          <a href="/dashboard/deletedPortfolios">
            <md-button class="md-hue-1 md-secondary-menu" data-ng-class="{'selected': isLocation('/dashboard/deletedPortfolios')}">
              <div flex layout="row">
                <md-icon class="material-icons">delete</md-icon>
                <span data-translate="DELETED_PORTFOLIOS"></span>
                <span class="count">{{deletedPortfoliosCount}}</span>
              </div>
            </md-button>
          </a>
        </li>
      </ul>
    </div>
    <div uib-accordion-group class="panel-default" is-open="isTaxonomyOpen">
      <uib-accordion-heading>
        <md-button class="md-hue-1 md-primary-menu" ng-click="changeTaxonomyDataAndVisibility('sidebar', 'primary')">
          <div flex layout="row">
            <span class="panel-title__text" data-translate="TABLE_OF_CONTENTS"></span>
            <span flex></span>
            <md-icon class="md-primary material-icons arrow panel-title__arrow">keyboard_arrow_right</md-icon>
          </div>
        </md-button>
      </uib-accordion-heading>
      <!-- Subitems -->
      <ul class="taxon-list">
        <li ng-repeat="(key, item) in reducedTaxon">
          <div class="taxon-item" icon="taxonIcons[key]" tree="taxonTree" dop-sidebar-taxon data-taxon="item"></div>
        </li>
      </ul>
    </div>
  </uib-accordion>

</md-sidenav>
