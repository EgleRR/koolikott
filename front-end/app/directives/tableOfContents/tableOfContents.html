<uib-accordion-heading>
  <md-button class="md-hue-1 md-primary-menu" >
    <div flex layout="row">
      <span class="panel-title__text" class="text-truncate">{{ portfolio.title }}</span>
      <span flex></span>
      <md-icon class="md-primary material-icons arrow panel-title__arrow">keyboard_arrow_right</md-icon>
    </div>
  </md-button>
</uib-accordion-heading>
<!-- Subitems -->
<ul class="sidenav-menu toc" data-du-scroll-container="scrollable-content">
  <li ng-repeat="chapter in portfolio.chapters">
    <a href="#chapter-{{$index}}" class="md-button one-row" id="toc-chapter-{{$index}}" data-offset="130"
       data-du-scrollspy data-ng-click="gotoChapter($event, $index); closeSidenav('left');" layout="row"
       data-ng-class="{'with-icon': $root.isEditPortfolioMode && showAddMaterialButton}">
      {{chapter.title}}
      <span flex></span>
      <span class="add-materials-to-chapter" data-ng-if="$root.isEditPortfolioMode && showAddMaterialButton" data-ng-click="addMaterialsToChapter($event, chapter)">
        <md-tooltip md-direction="right">
            <span data-translate="PORTFOLIO_ADD_MATERIAL"></span>
        </md-tooltip>
        <md-icon>add_circle</md-icon>
      </span>
    </a>
    <ul class="sidenav-menu-toggle-list">
      <li ng-repeat="subchapter in chapter.subchapters">
        <a href="#chapter-{{$parent.$index}}-{{$index}}" id="toc-chapter-{{$parent.$index}}-{{$index}}" data-offset="120"
           data-du-scrollspy class="md-button one-row" layout="row" data-ng-click="gotoChapter($event, $parent.$index, $index); closeSidenav('left');"
           data-ng-class="{'with-icon': $root.isEditPortfolioMode && showAddMaterialButton}">
          {{subchapter.title}}
          <span flex></span>
          <span class="add-materials-to-chapter" data-ng-if="$root.isEditPortfolioMode && showAddMaterialButton" data-ng-click="addMaterialsToChapter($event, subchapter)">
            <md-tooltip md-direction="right">
              <span data-translate="PORTFOLIO_ADD_MATERIAL"></span>
            </md-tooltip>
            <md-icon>add_circle</md-icon>
          </span>
        </a>
      </li>
      <li data-ng-hide="readonly">
        <a class="md-button md-primary one-row" data-ng-click="addNewSubChapter($index)">
          <span data-translate="PORTFOLIO_ADD_SUBCHAPTER"></span>
        </a>
      </li>
    </ul>
  </li>
  <li data-ng-click="showAddChapterDialog()" data-ng-hide="readonly">
    <md-button aria-label="Lisa uus peatÃ¼kk" class="md-primary" data-ng-click="addNewChapter()">
      <span data-translate="PORTFOLIO_ADD_CHAPTER"></span>
      <span flex></span>
    </md-button>
  </li>
</ul>
